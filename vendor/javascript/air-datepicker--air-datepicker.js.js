var t=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:global;var s={};!function(t,M){s=M()}(0,(function(){return function(){var s={d:function(t,M){for(var S in M)s.o(M,S)&&!s.o(t,S)&&Object.defineProperty(t,S,{enumerable:!0,get:M[S]})},o:function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}},M={};s.d(M,{default:function(){return R}});var S={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},x={classes:"",inline:!1,locale:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:S.days,minView:S.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,fixedHeight:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function a(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"==typeof t?s.querySelector(t):t}function n(){let{tagName:t="div",className:s="",innerHtml:M="",id:S="",attrs:x={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},N=document.createElement(t);return s&&N.classList.add(...s.split(" ")),S&&(N.id=S),M&&(N.innerHTML=M),x&&r(N,x),N}function r(t,s){for(let[M,S]of Object.entries(s))void 0!==S&&t.setAttribute(M,S);return t}function o(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function h(t){let s=t.getHours(),{hours:M,dayPeriod:S}=l(s);return{year:t.getFullYear(),month:t.getMonth(),fullMonth:t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,date:t.getDate(),fullDate:t.getDate()<10?"0"+t.getDate():t.getDate(),day:t.getDay(),hours:s,fullHours:d(s),hours12:M,dayPeriod:S,fullHours12:d(M),minutes:t.getMinutes(),fullMinutes:t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()}}function l(t){return{dayPeriod:t>11?"pm":"am",hours:t%12==0?12:t%12}}function d(t){return t<10?"0"+t:t}function c(t){let s=10*Math.floor(t.getFullYear()/10);return[s,s+9]}function u(){let t=[];for(var s=arguments.length,M=new Array(s),S=0;S<s;S++)M[S]=arguments[S];return M.forEach((s=>{if("object"==typeof s)for(let M in s)s[M]&&t.push(M);else s&&t.push(s)})),t.join(" ")}function p(t,s){let M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S.days;if(!t||!s)return!1;let x=h(t),N=h(s);return{[S.days]:x.date===N.date&&x.month===N.month&&x.year===N.year,[S.months]:x.month===N.month&&x.year===N.year,[S.years]:x.year===N.year}[M]}function m(t,s,M){let S=g(t,!1).getTime(),x=g(s,!1).getTime();return M?S>=x:S>x}function v(t,s){return!m(t,s,!0)}function g(t){let s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],M=new Date(t.getTime());return"boolean"!=typeof s||s||function(t){t.setHours(0,0,0,0)}(M),M}function D(t,s,M){t.length?t.forEach((t=>{t.addEventListener(s,M)})):t.addEventListener(s,M)}function y(t,s){return!(!t||t===document||t instanceof DocumentFragment)&&(t.matches(s)?t:y(t.parentNode,s))}function f(t,s,M){return t>M?M:t<s?s:t}function w(t){for(var s=arguments.length,M=new Array(s>1?s-1:0),S=1;S<s;S++)M[S-1]=arguments[S];return M.filter((t=>t)).forEach((s=>{for(let[M,S]of Object.entries(s))if(void 0!==S&&"[object Object]"===S.toString()){let s=void 0!==t[M]?t[M].toString():void 0,x=S.toString(),N=Array.isArray(S)?[]:{};t[M]=t[M]?s!==x?N:t[M]:N,w(t[M],S)}else t[M]=S})),t}function b(t){let s=t;return t instanceof Date||("string"==typeof t&&/^\d{4}-\d{2}-\d{2}$/.test(t)&&(t+="T00:00:00"),s=new Date(t)),isNaN(s.getTime())&&(console.log(`Unable to convert value "${t}" to Date object`),s=!1),s}function k(t){let s="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+s+")("+t+")($|<|"+s+")","g")}function $(t,s,M){return(s=function(t){var s=function(t,s){if("object"!=typeof t||null===t)return t;var M=t[Symbol.toPrimitive];if(void 0!==M){var S=M.call(t,"string");if("object"!=typeof S)return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof s?s:String(s)}(s))in t?Object.defineProperty(t,s,{value:M,enumerable:!0,configurable:!0,writable:!0}):t[s]=M,t}class C{constructor(){let{type:t,date:s,dp:M,opts:S,body:x}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$(this,"focus",(()=>{this.$cell.classList.add("-focus-"),this.focused=!0})),$(this,"removeFocus",(()=>{this.$cell.classList.remove("-focus-"),this.focused=!1})),$(this,"select",(()=>{this.$cell.classList.add("-selected-"),this.selected=!0})),$(this,"removeSelect",(()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1})),$(this,"onChangeSelectedDate",(()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())})),$(this,"onChangeFocusDate",(t=>{if(!t)return void(this.focused&&this.removeFocus());let s=p(t,this.date,this.type);s?this.focus():!s&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()})),$(this,"render",(()=>(this.$cell.innerHTML=this._getHtml(),this._handleClasses(),this.$cell))),this.type=t,this.singleType=this.type.slice(0,-1),this.date=s,this.dp=M,this.opts=S,this.body=x,this.customData=!1,this.init()}init(){var t;let{onRenderCell:s}=this.opts;s&&(this.customData=s({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),null!==(t=this.customData)&&void 0!==t&&t.disabled&&this.dp.disableDate(this.date)}_bindDatepickerEvents(){this.dp.on(S.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(S.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(S.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(S.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var t;let{year:s,month:M,date:S}=h(this.date),x=(null===(t=this.customData)||void 0===t?void 0:t.attrs)||{};this.$cell=n({attrs:{"data-year":s,"data-month":M,"data-date":S,...x}}),this.$cell.adpCell=this}_getClassName(){var t;let s=new Date,{selectOtherMonths:M,selectOtherYears:x}=this.opts,{minDate:N,maxDate:P,isDateDisabled:j}=this.dp,{day:B}=h(this.date),K=this._isOutOfMinMaxRange(),U=j(this.date),Y=u("air-datepicker-cell",`-${this.singleType}-`,{"-current-":p(s,this.date,this.type),"-min-date-":N&&p(N,this.date,this.type),"-max-date-":P&&p(P,this.date,this.type)}),W="";switch(this.type){case S.days:W=u({"-weekend-":this.dp.isWeekend(B),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!M||K||U});break;case S.months:W=u({"-disabled-":K});break;case S.years:W=u({"-other-decade-":this.isOtherDecade,"-disabled-":K||this.isOtherDecade&&!x})}return u(Y,W,null===(t=this.customData)||void 0===t?void 0:t.classes).split(" ")}_getHtml(){var t;let{year:s,month:M,date:x}=h(this.date),{showOtherMonths:N,showOtherYears:P}=this.opts;if(null!==(t=this.customData)&&void 0!==t&&t.html)return this.customData.html;switch(this.type){case S.days:return!N&&this.isOtherMonth?"":x;case S.months:return this.dp.locale[this.opts.monthsField][M];case S.years:return!P&&this.isOtherDecade?"":s}}_isOutOfMinMaxRange(){let{minDate:t,maxDate:s}=this.dp,{type:M,date:x}=this,{month:N,year:P,date:j}=h(x),B=M===S.days,K=M===S.years,U=!!t&&new Date(P,K?t.getMonth():N,B?j:t.getDate()),Y=!!s&&new Date(P,K?s.getMonth():N,B?j:s.getDate());return t&&s?v(U,t)||m(Y,s):t?v(U,t):s?m(Y,s):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){const{selectedDates:t,focusDate:s,rangeDateTo:M,rangeDateFrom:S}=this.dp,x=t.length;if(!x)return;let N=S,P=M;if(1===x&&s){const M=m(s,t[0]);N=M?t[0]:s,P=M?s:t[0]}let j=u({"-in-range-":N&&P&&(B=this.date,K=N,U=P,m(B,K)&&v(B,U)),"-range-from-":N&&p(this.date,N,this.type),"-range-to-":P&&p(this.date,P,this.type)});var B,K,U;this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),j&&this.$cell.classList.add(...j.split(" "))}_handleSelectedStatus(){let t=this.dp._checkIfDateIsSelected(this.date,this.type);t?this.select():!t&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){p(this.dp.focusDate,this.date,this.type)&&this.focus()}_handleClasses(){this.$cell.setAttribute("class",""),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),this.dp.opts.range&&this._handleRangeStatus()),this.$cell.classList.add(...this._getClassName())}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function _(t,s,M){return(s=function(t){var s=function(t,s){if("object"!=typeof t||null===t)return t;var M=t[Symbol.toPrimitive];if(void 0!==M){var S=M.call(t,"string");if("object"!=typeof S)return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof s?s:String(s)}(s))in t?Object.defineProperty(t,s,{value:M,enumerable:!0,configurable:!0,writable:!0}):t[s]=M,t}let N={[S.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${S.days}-"></div>`,[S.months]:`<div class="air-datepicker-body--cells -${S.months}-"></div>`,[S.years]:`<div class="air-datepicker-body--cells -${S.years}-"></div>`};const P=".air-datepicker-cell";class T{constructor(t){let{dp:s,type:M,opts:x}=t;_(this,"handleClick",(t=>{let s=t.target.closest(P).adpCell;if(s.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let M=this.dp._checkIfDateIsSelected(s.date,s.type);M?this.dp._handleAlreadySelectedDates(M,s.date):this.dp.selectDate(s.date)})),_(this,"handleDayNameClick",(t=>{let s=t.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(s),datepicker:this.dp})})),_(this,"onChangeCurrentView",(t=>{t!==this.type?this.hide():(this.show(),this.render())})),_(this,"onMouseOverCell",(t=>{let s=y(t.target,P);this.dp.setFocusDate(!!s&&s.adpCell.date)})),_(this,"onMouseOutCell",(()=>{this.dp.setFocusDate(!1)})),_(this,"onClickBody",(t=>{let{onClickDayName:s}=this.opts,M=t.target;M.closest(P)&&this.handleClick(t),s&&M.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(t)})),_(this,"onMouseDown",(t=>{this.pressed=!0;let s=y(t.target,P),M=s&&s.adpCell;p(M.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),p(M.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)})),_(this,"onMouseMove",(t=>{if(!this.pressed||!this.dp.isMinViewReached)return;t.preventDefault();let s=y(t.target,P),M=s&&s.adpCell,{selectedDates:S,rangeDateTo:x,rangeDateFrom:N}=this.dp;if(!M||M.isDisabled)return;let{date:j}=M;if(2===S.length){if(this.rangeFromFocused&&!m(j,x)){let{hours:t,minutes:s}=h(N);j.setHours(t),j.setMinutes(s),this.dp.rangeDateFrom=j,this.dp.replaceDate(N,j)}if(this.rangeToFocused&&!v(j,N)){let{hours:t,minutes:s}=h(x);j.setHours(t),j.setMinutes(s),this.dp.rangeDateTo=j,this.dp.replaceDate(x,j)}}})),_(this,"onMouseUp",(()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1})),_(this,"onChangeViewDate",((t,s)=>{if(!this.isVisible)return;let M=c(t),x=c(s);switch(this.dp.currentView){case S.days:if(p(t,s,S.months))return;break;case S.months:if(p(t,s,S.years))return;break;case S.years:if(M[0]===x[0]&&M[1]===x[1])return}this.render()})),_(this,"render",(()=>{this.destroyCells(),this._generateCells(),this.cells.forEach((t=>{this.$cells.appendChild(t.render())}))})),this.dp=s,this.type=M,this.opts=x,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===S.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:t,dynamicRange:s}=this.opts;D(this.$el,"mouseover",this.onMouseOverCell),D(this.$el,"mouseout",this.onMouseOutCell),D(this.$el,"click",this.onClickBody),t&&s&&(D(this.$el,"mousedown",this.onMouseDown),D(this.$el,"mousemove",this.onMouseMove),D(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(S.eventChangeViewDate,this.onChangeViewDate),this.dp.on(S.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=n({className:`air-datepicker-body -${this.type}-`,innerHtml:N[this.type]}),this.$names=a(".air-datepicker-body--day-names",this.$el),this.$cells=a(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dp.locale.firstDay,s="",M=this.dp.isWeekend,{onClickDayName:x}=this.opts,N=t,P=0;for(;P<7;){let t=N%7;s+=`<div class="${u("air-datepicker-body--day-name",{[S.cssClassWeekend]:M(t),"-clickable-":!!x})}" data-day-index='${t}'>${this.dp.locale.daysMin[t]}</div>`,P++,N++}return s}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCell(t){let{type:s,dp:M,opts:S}=this;return new C({type:s,dp:M,opts:S,date:t,body:this})}_generateCells(){T.getDatesFunction(this.type)(this.dp,(t=>{this.cells.push(this._generateCell(t))}))}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach((t=>t.destroy())),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(S.eventChangeViewDate,this.onChangeViewDate),this.dp.off(S.eventChangeCurrentView,this.onChangeCurrentView)}static getDaysDates(t,s){let{viewDate:M,opts:{fixedHeight:S},locale:{firstDay:x}}=t,N=o(M),{year:P,month:j}=h(M),B=new Date(P,j,1),K=new Date(P,j,N),U=B.getDay()-x,Y=6-K.getDay()+x;U=U<0?U+7:U,Y=Y>6?Y-7:Y;let W=function(t,s){let{year:M,month:S,date:x}=h(t);return new Date(M,S,x-s)}(B,U),z=N+U+Y,q=W.getDate(),{year:G,month:J}=h(W),X=0;S&&(z=42);const Q=[];for(;X<z;){let t=new Date(G,J,q+X);s&&s(t),Q.push(t),X++}return Q}static getMonthsDates(t,s){let{year:M}=t.parsedViewDate,S=0,x=[];for(;S<12;){const t=new Date(M,S);x.push(t),s&&s(t),S++}return x}static getYearsDates(t,s){let M=c(t.viewDate),S=M[0]-1,x=M[1]+1,N=S,P=[];for(;N<=x;){const t=new Date(N,0);P.push(t),s&&s(t),N++}return P}static getDatesFunction(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.days;return{[S.days]:T.getDaysDates,[S.months]:T.getMonthsDates,[S.years]:T.getYearsDates}[t]}}function F(t,s,M){return(s=function(t){var s=function(t,s){if("object"!=typeof t||null===t)return t;var M=t[Symbol.toPrimitive];if(void 0!==M){var S=M.call(t,"string");if("object"!=typeof S)return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof s?s:String(s)}(s))in t?Object.defineProperty(t,s,{value:M,enumerable:!0,configurable:!0,writable:!0}):t[s]=M,t}class V{constructor(t){let{dp:s,opts:M}=t;F(this,"onClickNav",(t=>{let s=y(t.target,".air-datepicker-nav--action");if(!s)return;let M=s.dataset.action;this.dp[M]()})),F(this,"onChangeViewDate",(()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()})),F(this,"onChangeCurrentView",(()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()})),F(this,"onClickNavTitle",(()=>{this.dp.isFinalView||this.dp.up()})),F(this,"update",(()=>{let{prevHtml:t,nextHtml:s}=this.opts;this.$prev.innerHTML=t,this.$next.innerHTML=s,this._resetNavStatus(),this.render(),this.handleNavStatus()})),F(this,"renderDelay",(()=>{setTimeout(this.render)})),F(this,"render",(()=>{this.$title.innerHTML=this._getTitle(),function(t,s){for(let M in s)s[M]?t.classList.add(M):t.classList.remove(M)}(this.$title,{"-disabled-":this.dp.isFinalView})})),this.dp=s,this.opts=M,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=a(".air-datepicker-nav--title",this.$el),this.$prev=a('[data-action="prev"]',this.$el),this.$next=a('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(S.eventChangeViewDate,this.onChangeViewDate),this.dp.on(S.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(S.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(S.eventChangeTime,this.render))}destroy(){this.dp.off(S.eventChangeViewDate,this.onChangeViewDate),this.dp.off(S.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(S.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(S.eventChangeTime,this.render))}_createElement(){this.$el=n({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:t,opts:s}=this,M=s.navTitles[t.currentView];return"function"==typeof M?M(t):t.formatDate(t.viewDate,M)}handleNavStatus(){let{disableNavWhenOutOfRange:t}=this.opts,{minDate:s,maxDate:M}=this.dp;if(!s&&!M||!t)return;let{year:x,month:N}=this.dp.parsedViewDate,P=!!s&&h(s),j=!!M&&h(M);switch(this.dp.currentView){case S.days:s&&P.month>=N&&P.year>=x&&this._disableNav("prev"),M&&j.month<=N&&j.year<=x&&this._disableNav("next");break;case S.months:s&&P.year>=x&&this._disableNav("prev"),M&&j.year<=x&&this._disableNav("next");break;case S.years:{let t=c(this.dp.viewDate);s&&P.year>=t[0]&&this._disableNav("prev"),M&&j.year<=t[1]&&this._disableNav("next");break}}}_disableNav(t){a('[data-action="'+t+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){!function(t){for(var s=arguments.length,M=new Array(s>1?s-1:0),S=1;S<s;S++)M[S-1]=arguments[S];t.length?t.forEach((t=>{t.classList.remove(...M)})):t.classList.remove(...M)}(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:t,nextHtml:s}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${t}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${s}</div>`}get isNavIsFunction(){let{navTitles:t}=this.opts;return Object.keys(t).find((s=>"function"==typeof t[s]))}}var j={today:{content:t=>t.locale.today,onClick:t=>t.setViewDate(new Date)},clear:{content:t=>t.locale.clear,onClick:t=>t.clear()}};class H{constructor(t){let{dp:s,opts:M}=t;this.dp=s,this.opts=M,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=n({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:t}=this.opts;Array.isArray(t)||(t=[t]),t.forEach((t=>{let s=t;"string"==typeof t&&j[t]&&(s=j[t]);let M=this.createButton(s);s.onClick&&this.attachEventToButton(M,s.onClick),this.$el.appendChild(M)}))}attachEventToButton(t,s){t.addEventListener("click",(()=>{s(this.dp)}))}createButton(t){let{content:s,className:M,tagName:S="button",attrs:x={}}=t;return n({tagName:S,innerHtml:`<span tabindex='-1'>${"function"==typeof s?s(this.dp):s}</span>`,className:u("air-datepicker-button",M),attrs:x})}render(){this.generateButtons()}}function E(t,s,M){return(s=function(t){var s=function(t,s){if("object"!=typeof t||null===t)return t;var M=t[Symbol.toPrimitive];if(void 0!==M){var S=M.call(t,"string");if("object"!=typeof S)return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof s?s:String(s)}(s))in t?Object.defineProperty(t,s,{value:M,enumerable:!0,configurable:!0,writable:!0}):t[s]=M,t}class L{constructor(){let{opts:t,dp:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};E(this,"toggleTimepickerIsActive",(t=>{this.dp.timepickerIsActive=t})),E(this,"onChangeSelectedDate",(t=>{let{date:s,updateTime:M=!1}=t;s&&(this.setMinMaxTime(s),this.setCurrentTime(!!M&&s),this.addTimeToDate(s))})),E(this,"onChangeLastSelectedDate",(t=>{t&&(this.setTime(t),this.render())})),E(this,"onChangeInputRange",(t=>{let s=t.target;this[s.getAttribute("name")]=s.value,this.updateText(),this.dp.trigger(S.eventChangeTime,{hours:this.hours,minutes:this.minutes})})),E(this,"onMouseEnterLeave",(t=>{let s=t.target.getAttribute("name"),M=this.$minutesText;"hours"===s&&(M=this.$hoursText),M.classList.toggle("-focus-")})),E(this,"onFocus",(()=>{this.toggleTimepickerIsActive(!0)})),E(this,"onBlur",(()=>{this.toggleTimepickerIsActive(!1)})),this.opts=t,this.dp=s;let{timeFormat:M}=this.dp.locale;M&&(M.match(k("h"))||M.match(k("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(S.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(S.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let t="input";navigator.userAgent.match(/trident/gi)&&(t="change"),D(this.$ranges,t,this.onChangeInputRange),D(this.$ranges,"mouseenter",this.onMouseEnterLeave),D(this.$ranges,"mouseleave",this.onMouseEnterLeave),D(this.$ranges,"focus",this.onFocus),D(this.$ranges,"mousedown",this.onFocus),D(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=n({className:u("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(S.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(S.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:t,hours:s,displayHours:M,minutes:S,minHours:x,minMinutes:N,maxHours:P,maxMinutes:j,dayPeriod:B,opts:{hoursStep:K,minutesStep:U}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${d(M)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${d(S)}</span>   `+(t?`<span class='air-datepicker-time--current-ampm'>${B}</span>`:"")+'</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">'+`      <input type="range" name="hours" value="${s}" min="${x}" max="${P}" step="${K}"/>   </div>   <div class="air-datepicker-time--row">`+`      <input type="range" name="minutes" value="${S}" min="${N}" max="${j}" step="${U}"/>   </div></div>`}defineDOM(){let e=t=>a(t,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=e('[name="hours"]'),this.$minutes=e('[name="minutes"]'),this.$hoursText=e(".air-datepicker-time--current-hours"),this.$minutesText=e(".air-datepicker-time--current-minutes"),this.$ampm=e(".air-datepicker-time--current-ampm")}setTime(t){this.setMinMaxTime(t),this.setCurrentTime(t)}addTimeToDate(t){t&&(t.setHours(this.hours),t.setMinutes(this.minutes))}setMinMaxTime(t){if(this.setMinMaxTimeFromOptions(),t){let{minDate:s,maxDate:M}=this.dp;s&&p(t,s)&&this.setMinTimeFromMinDate(s),M&&p(t,M)&&this.setMaxTimeFromMaxDate(M)}}setCurrentTime(t){let{hours:s,minutes:M}=t?h(t):this;this.hours=f(s,this.minHours,this.maxHours),this.minutes=f(M,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:t,minMinutes:s,maxHours:M,maxMinutes:S}=this.opts;this.minHours=f(t,0,23),this.minMinutes=f(s,0,59),this.maxHours=f(M,0,23),this.maxMinutes=f(S,0,59)}setMinTimeFromMinDate(t){let{lastSelectedDate:s}=this.dp;this.minHours=t.getHours(),s&&s.getHours()>t.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=t.getMinutes()}setMaxTimeFromMaxDate(t){let{lastSelectedDate:s}=this.dp;this.maxHours=t.getHours(),s&&s.getHours()<t.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=t.getMinutes()}updateSliders(){r(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,r(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=d(this.displayHours),this.$minutesText.innerHTML=d(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(t){this._hours=t;let{hours:s,dayPeriod:M}=l(t);this.displayHours=this.ampm?s:t,this.dayPeriod=M}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function O(t,s,M){return(s=function(t){var s=function(t,s){if("object"!=typeof t||null===t)return t;var M=t[Symbol.toPrimitive];if(void 0!==M){var S=M.call(t,"string");if("object"!=typeof S)return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof s?s:String(s)}(s))in t?Object.defineProperty(t,s,{value:M,enumerable:!0,configurable:!0,writable:!0}):t[s]=M,t}class A{constructor(t){let{dp:s,opts:M}=t;O(this,"pressedKeys",new Set),O(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],t=>t.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],t=>t.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],t=>t.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],t=>t.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],t=>t.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],t=>t.year-=10],[["Control","Shift","ArrowUp"],(t,s)=>s.up()]])),O(this,"handleHotKey",(t=>{let s=this.hotKeys.get(t),M=h(this.getInitialFocusDate());s(M,this.dp);let{year:S,month:x,date:N}=M,P=o(new Date(S,x));P<N&&(N=P);let j=this.dp.getClampedDate(new Date(S,x,N));this.dp.setFocusDate(j,{viewDateTransition:!0})})),O(this,"isHotKeyPressed",(()=>{let t=!1,s=this.pressedKeys.size,i=t=>this.pressedKeys.has(t);for(let[M]of this.hotKeys){if(t)break;if(Array.isArray(M[0]))M.forEach((S=>{t||s!==S.length||(t=S.every(i)&&M)}));else{if(s!==M.length)continue;t=M.every(i)&&M}}return t})),O(this,"isArrow",(t=>t>=37&&t<=40)),O(this,"onKeyDown",(t=>{let{key:s,which:M}=t,{dp:S,dp:{focusDate:x},opts:N}=this;this.registerKey(s);let P=this.isHotKeyPressed();if(P)return t.preventDefault(),void this.handleHotKey(P);if(this.isArrow(M))return t.preventDefault(),void this.focusNextCell(s);if("Enter"===s){if(S.currentView!==N.minView)return void S.down();if(x){let t=S._checkIfDateIsSelected(x);return void(t?S._handleAlreadySelectedDates(t,x):S.selectDate(x))}}"Escape"===s&&this.dp.hide()})),O(this,"onKeyUp",(t=>{this.removeKey(t.key)})),this.dp=s,this.opts=M,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:t}=this.dp;t.addEventListener("keydown",this.onKeyDown),t.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:t}=this.dp;t.removeEventListener("keydown",this.onKeyDown),t.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:t,currentView:s,selectedDates:M,parsedViewDate:{year:x,month:N}}=this.dp,P=t||M[M.length-1];if(!P)switch(s){case S.days:P=new Date(x,N,(new Date).getDate());break;case S.months:P=new Date(x,N,1);break;case S.years:P=new Date(x,0,1)}return P}focusNextCell(t){let s=this.getInitialFocusDate(),{currentView:M}=this.dp,{days:x,months:N,years:P}=S,j=h(s),B=j.year,K=j.month,U=j.date;switch(t){case"ArrowLeft":M===x&&(U-=1),M===N&&(K-=1),M===P&&(B-=1);break;case"ArrowUp":M===x&&(U-=7),M===N&&(K-=3),M===P&&(B-=4);break;case"ArrowRight":M===x&&(U+=1),M===N&&(K+=1),M===P&&(B+=1);break;case"ArrowDown":M===x&&(U+=7),M===N&&(K+=3),M===P&&(B+=4)}let Y=this.dp.getClampedDate(new Date(B,K,U));this.dp.setFocusDate(Y,{viewDateTransition:!0})}registerKey(t){this.pressedKeys.add(t)}removeKey(t){this.pressedKeys.delete(t)}}let B={on(s,M){(this||t).__events||((this||t).__events={}),(this||t).__events[s]?(this||t).__events[s].push(M):(this||t).__events[s]=[M]},off(s,M){(this||t).__events&&(this||t).__events[s]&&((this||t).__events[s]=(this||t).__events[s].filter((t=>t!==M)))},removeAllEvents(){(this||t).__events={}},trigger(s){for(var M=arguments.length,S=new Array(M>1?M-1:0),x=1;x<M;x++)S[x-1]=arguments[x];(this||t).__events&&(this||t).__events[s]&&(this||t).__events[s].forEach((t=>{t(...S)}))}};function I(t,s,M){return(s=function(t){var s=function(t,s){if("object"!=typeof t||null===t)return t;var M=t[Symbol.toPrimitive];if(void 0!==M){var S=M.call(t,"string");if("object"!=typeof S)return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof s?s:String(s)}(s))in t?Object.defineProperty(t,s,{value:M,enumerable:!0,configurable:!0,writable:!0}):t[s]=M,t}let K="",U="",Y=!1;class R{static buildGlobalContainer(t){Y=!0,K=n({className:t,id:t}),a("body").appendChild(K)}constructor(t,s){var M=this;if(I(this,"viewIndexes",[S.days,S.months,S.years]),I(this,"next",(()=>{let{year:t,month:s}=this.parsedViewDate;switch(this.currentView){case S.days:this.setViewDate(new Date(t,s+1,1));break;case S.months:this.setViewDate(new Date(t+1,s,1));break;case S.years:this.setViewDate(new Date(t+10,0,1))}})),I(this,"prev",(()=>{let{year:t,month:s}=this.parsedViewDate;switch(this.currentView){case S.days:this.setViewDate(new Date(t,s-1,1));break;case S.months:this.setViewDate(new Date(t-1,s,1));break;case S.years:this.setViewDate(new Date(t-10,0,1))}})),I(this,"_finishHide",(()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)})),I(this,"setPosition",(function(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("function"==typeof(t=t||M.opts.position))return void(M.customHide=t({$datepicker:M.$datepicker,$target:M.$el,$pointer:M.$pointer,isViewChange:s,done:M._finishHide}));let S,x,{isMobile:N}=M.opts,P=M.$el.getBoundingClientRect(),j=M.$el.getBoundingClientRect(),B=M.$datepicker.offsetParent,K=M.$el.offsetParent,U=M.$datepicker.getBoundingClientRect(),Y=t.split(" "),W=window.scrollY,z=window.scrollX,q=M.opts.offset,G=Y[0],J=Y[1];if(N)M.$datepicker.style.cssText="left: 50%; top: 50%";else{if(B===K&&B!==document.body&&(j={top:M.$el.offsetTop,left:M.$el.offsetLeft,width:P.width,height:M.$el.offsetHeight},W=0,z=0),B!==K&&B!==document.body){let t=B.getBoundingClientRect();j={top:P.top-t.top,left:P.left-t.left,width:P.width,height:P.height},W=0,z=0}switch(G){case"top":S=j.top-U.height-q;break;case"right":x=j.left+j.width+q;break;case"bottom":S=j.top+j.height+q;break;case"left":x=j.left-U.width-q}switch(J){case"top":S=j.top;break;case"right":x=j.left+j.width-U.width;break;case"bottom":S=j.top+j.height-U.height;break;case"left":x=j.left;break;case"center":/left|right/.test(G)?S=j.top+j.height/2-U.height/2:x=j.left+j.width/2-U.width/2}M.$datepicker.style.cssText=`left: ${x+z}px; top: ${S+W}px`}})),I(this,"_setInputValue",(()=>{let{opts:t,$altField:s,locale:{dateFormat:M}}=this,{altFieldDateFormat:S,altField:x}=t;x&&s&&(s.value=this._getInputValue(S)),this.$el.value=this._getInputValue(M)})),I(this,"_getInputValue",(t=>{let{selectedDates:s,opts:M}=this,{multipleDates:S,multipleDatesSeparator:x}=M;if(!s.length)return"";let N="function"==typeof t,P=N?t(S?s:s[0]):s.map((s=>this.formatDate(s,t)));return P=N?P:P.join(x),P})),I(this,"_checkIfDateIsSelected",(function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.days,x=!1;return M.selectedDates.some((M=>{let S=p(t,M,s);return x=S&&M,S})),x})),I(this,"_scheduleCallAfterTransition",(t=>{this._cancelScheduledCall(),t&&t(!1),this._onTransitionEnd=()=>{t&&t(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})})),I(this,"_cancelScheduledCall",(()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)})),I(this,"setViewDate",(t=>{if(!((t=b(t))instanceof Date))return;if(p(t,this.viewDate))return;let s=this.viewDate;this.viewDate=t;let{onChangeViewDate:M}=this.opts;if(M){let{month:t,year:s}=this.parsedViewDate;M({month:t,year:s,decade:this.curDecade})}this.trigger(S.eventChangeViewDate,t,s)})),I(this,"setFocusDate",(function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t||(t=b(t))instanceof Date)&&(M.focusDate=t,M.trigger(S.eventChangeFocusDate,t,s))})),I(this,"setCurrentView",(function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(M.viewIndexes.includes(t)){if(M.currentView=t,M.elIsInput&&M.visible&&M.setPosition(void 0,!0),M.trigger(S.eventChangeCurrentView,t),!M.views[t]){let s=M.views[t]=new T({dp:M,opts:M.opts,type:t});M.shouldUpdateDOM&&M.$content.appendChild(s.$el)}M.opts.onChangeView&&!s.silent&&M.opts.onChangeView(t)}})),I(this,"_updateLastSelectedDate",(t=>{this.lastSelectedDate=t,this.trigger(S.eventChangeLastSelectedDate,t)})),I(this,"destroy",(()=>{if(this.isDestroyed)return;let{showEvent:t,isMobile:s}=this.opts,M=this.$datepicker.parentNode;M&&M.removeChild(this.$datepicker),this.$el.removeEventListener(t,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),s&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts={},this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=[],this.rangeDateFrom=null,this.rangeDateTo=null,this.isDestroyed=!0})),I(this,"update",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},x=w({},M.opts),{silent:N}=s;w(M.opts,t);let{timepicker:P,buttons:j,range:B,selectedDates:K,isMobile:Y}=M.opts,W=M.visible||M.treatAsInline;M._createMinMaxDates(),M._limitViewDateByMaxMinDates(),M._handleLocale(),K&&(M.selectedDates=[],M.selectDate(K,{silent:N})),t.view&&M.setCurrentView(t.view,{silent:N}),M._setInputValue(),x.range&&!B?(M.rangeDateTo=!1,M.rangeDateFrom=!1):!x.range&&B&&M.selectedDates.length&&(M.rangeDateFrom=M.selectedDates[0],M.rangeDateTo=M.selectedDates[1]),x.timepicker&&!P?(W&&M.timepicker.destroy(),M.timepicker=!1,M.$timepicker.parentNode.removeChild(M.$timepicker)):!x.timepicker&&P&&M._addTimepicker(),!x.buttons&&j?M._addButtons():x.buttons&&!j?(M.buttons.destroy(),M.$buttons.parentNode.removeChild(M.$buttons)):W&&x.buttons&&j&&M.buttons.clearHtml().render(),!x.isMobile&&Y?(M.treatAsInline||U||M._createMobileOverlay(),M._addMobileAttributes(),M.visible&&M._showMobileOverlay()):x.isMobile&&!Y&&(M._removeMobileAttributes(),M.visible&&(U.classList.remove("-active-"),"function"!=typeof M.opts.position&&M.setPosition())),W&&(M.nav.update(),M.views[M.currentView].render(),M.currentView===S.days&&M.views[M.currentView].renderDayNames())})),I(this,"disableDate",((t,s)=>{(Array.isArray(t)?t:[t]).forEach((t=>{let M=b(t);if(!M)return;let S=s?"delete":"add";this.disabledDates[S](this.formatDate(M,"yyyy-MM-dd"));let x=this.getCell(M,this.currentViewSingular);x&&x.adpCell.render()}),[])})),I(this,"enableDate",(t=>{this.disableDate(t,!0)})),I(this,"isDateDisabled",(t=>{let s=b(t);return this.disabledDates.has(this.formatDate(s,"yyyy-MM-dd"))})),I(this,"isOtherMonth",(t=>{let{month:s}=h(t);return s!==this.parsedViewDate.month})),I(this,"isOtherYear",(t=>{let{year:s}=h(t);return s!==this.parsedViewDate.year})),I(this,"isOtherDecade",(t=>{let{year:s}=h(t),[M,S]=c(this.viewDate);return s<M||s>S})),I(this,"_onChangeSelectedDate",(t=>{let{silent:s}=t;setTimeout((()=>{this._setInputValue(),this.opts.onSelect&&!s&&this._triggerOnSelect()}))})),I(this,"_onChangeFocusedDate",(function(t){let{viewDateTransition:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return;let S=!1;s&&(S=M.isOtherMonth(t)||M.isOtherYear(t)||M.isOtherDecade(t)),S&&M.setViewDate(t),M.opts.onFocus&&M.opts.onFocus({datepicker:M,date:t})})),I(this,"_onChangeTime",(t=>{let{hours:s,minutes:M}=t,S=new Date,{lastSelectedDate:x,opts:{onSelect:N}}=this,P=x;x||(P=S);let j=this.getCell(P,this.currentViewSingular),B=j&&j.adpCell;B&&B.isDisabled||(P.setHours(s),P.setMinutes(M),x?(this._setInputValue(),N&&this._triggerOnSelect()):this.selectDate(P))})),I(this,"_onFocus",(t=>{this.visible||this.show()})),I(this,"_onBlur",(t=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()})),I(this,"_onMouseDown",(t=>{this.inFocus=!0})),I(this,"_onMouseUp",(t=>{this.inFocus=!1,this.$el.focus()})),I(this,"_onResize",(()=>{this.visible&&"function"!=typeof this.opts.position&&this.setPosition()})),I(this,"_onClickOverlay",(()=>{this.visible&&this.hide()})),I(this,"getViewDates",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.days;return T.getDatesFunction(t)(M)})),I(this,"isWeekend",(t=>this.opts.weekends.includes(t))),I(this,"getClampedDate",(t=>{let{minDate:s,maxDate:M}=this,S=t;return M&&m(t,M)?S=M:s&&v(t,s)&&(S=s),S})),this.$el=a(t),!this.$el)return;this.$datepicker=n({className:"air-datepicker"}),this.opts=w({},x,s),this.$customContainer=!!this.opts.container&&a(this.opts.container),this.$altField=a(this.opts.altField||!1);let{view:N,startDate:P}=this.opts;P||(this.opts.startDate=new Date),"INPUT"===this.$el.nodeName&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=b(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=N,this.selectedDates=[],this.disabledDates=new Set,this.isDestroyed=!1,this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:t,treatAsInline:s,opts:{inline:M,isMobile:S,selectedDates:x,keyboardNav:N,onlyTimepicker:P}}=this,j=a("body");(!Y||Y&&K&&!j.contains(K))&&!M&&this.elIsInput&&!this.$customContainer&&R.buildGlobalContainer(R.defaultGlobalContainerId),!S||U||s||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(M||this._bindEvents(),N&&!P&&(this.keyboardNav=new A({dp:this,opts:t}))),x&&this.selectDate(x,{silent:!0}),this.opts.visible&&!s&&this.show(),S&&!s&&this.$el.setAttribute("readonly",!0),s&&this._createComponents()}_createMobileOverlay(){U=n({className:"air-datepicker-overlay"}),K.appendChild(U)}_createComponents(){let{opts:t,treatAsInline:s,opts:{inline:M,buttons:S,timepicker:x,position:N,classes:P,onlyTimepicker:j,isMobile:B}}=this;this._buildBaseHtml(),this.elIsInput&&(M||this._setPositionClasses(N)),!M&&this.elIsInput||this.$datepicker.classList.add("-inline-"),P&&this.$datepicker.classList.add(...P.split(" ")),j&&this.$datepicker.classList.add("-only-timepicker-"),B&&!s&&this._addMobileAttributes(),this.views[this.currentView]=new T({dp:this,type:this.currentView,opts:t}),this.nav=new V({dp:this,opts:t}),x&&this._addTimepicker(),S&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let t in this.views)this.views[t].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){U.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){U.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||""===this.initialReadonly||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:t,maxDate:s}=this.opts;this.minDate=!!t&&b(t),this.maxDate=!!s&&b(s)}_addTimepicker(){this.$timepicker=n({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new L({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=n({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new H({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(S.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(S.eventChangeFocusDate,this._onChangeFocusedDate),this.on(S.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){let{inline:t}=this.opts;var s,M;this.elIsInput?t?(s=this.$datepicker,(M=this.$el).parentNode.insertBefore(s,M.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=a(".air-datepicker--content",this.$datepicker),this.$pointer=a(".air-datepicker--pointer",this.$datepicker),this.$nav=a(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){let{locale:t,dateFormat:s,firstDay:M,timepicker:S,onlyTimepicker:x,timeFormat:N,dateTimeSeparator:P}=this.opts;var j;this.locale=(j=t,JSON.parse(JSON.stringify(j))),s&&(this.locale.dateFormat=s),void 0!==N&&""!==N&&(this.locale.timeFormat=N);let{timeFormat:B}=this.locale;if(""!==M&&(this.locale.firstDay=M),S&&"function"!=typeof s){let t=B?P:"";this.locale.dateFormat=[this.locale.dateFormat,B||""].join(t)}x&&"function"!=typeof s&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(t){if("function"==typeof t)return void this.$datepicker.classList.add("-custom-position-");let s=(t=t.split(" "))[0],M=`air-datepicker -${s}-${t[1]}- -from-${s}-`;this.$datepicker.classList.add(...M.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:t,minDate:s,maxDate:M}=this;M&&m(t,M)&&this.setViewDate(M),s&&v(t,s)&&this.setViewDate(s)}formatDate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewDate,s=arguments.length>1?arguments[1]:void 0;if(t=b(t),!(t instanceof Date))return;let M=s,S=this.locale,x=h(t),N=x.dayPeriod,P=c(t),j=R.replacer,B={T:t.getTime(),m:x.minutes,mm:x.fullMinutes,h:x.hours12,hh:x.fullHours12,H:x.hours,HH:x.fullHours,aa:N,AA:N.toUpperCase(),E:S.daysShort[x.day],EEEE:S.days[x.day],d:x.date,dd:x.fullDate,M:x.month+1,MM:x.fullMonth,MMM:S.monthsShort[x.month],MMMM:S.months[x.month],yy:x.year.toString().slice(-2),yyyy:x.year,yyyy1:P[0],yyyy2:P[1]};for(let[t,s]of Object.entries(B))M=j(M,k(t),s);return M}down(t){this._handleUpDownActions(t,"down")}up(t){this._handleUpDownActions(t,"up")}selectDate(t){let s,M=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{currentView:x,parsedViewDate:N,selectedDates:P}=this,{updateTime:j}=M,{moveToOtherMonthsOnSelect:B,moveToOtherYearsOnSelect:K,multipleDates:U,range:Y,autoClose:W,onBeforeSelect:z}=this.opts,q=P.length;if(Array.isArray(t))return t.forEach((t=>{this.selectDate(t,M)})),new Promise((t=>{setTimeout(t)}));if((t=b(t))instanceof Date){if(z&&!z({date:t,datepicker:this}))return Promise.resolve();if(x===S.days&&t.getMonth()!==N.month&&B&&(s=new Date(t.getFullYear(),t.getMonth(),1)),x===S.years&&t.getFullYear()!==N.year&&K&&(s=new Date(t.getFullYear(),0,1)),s&&this.setViewDate(s),U&&!Y){if(q===U)return;this._checkIfDateIsSelected(t)||P.push(t)}else if(Y)switch(q){case 1:P.push(t),this.rangeDateTo||(this.rangeDateTo=t),m(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=t),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[t],this.rangeDateFrom=t,this.rangeDateTo="";break;default:this.selectedDates=[t],this.rangeDateFrom=t}else this.selectedDates=[t];return this.trigger(S.eventChangeSelectedDate,{action:S.actionSelectDate,silent:null==M?void 0:M.silent,date:t,updateTime:j}),this._updateLastSelectedDate(t),W&&!this.timepickerIsActive&&this.visible&&(U||Y?Y&&1===q&&this.hide():this.hide()),new Promise((t=>{setTimeout(t)}))}}unselectDate(t){let s=this.selectedDates,M=this;if((t=b(t))instanceof Date)return s.some(((x,N)=>{if(p(x,t))return s.splice(N,1),M.selectedDates.length?(M.rangeDateTo="",M.rangeDateFrom=s[0],M._updateLastSelectedDate(M.selectedDates[M.selectedDates.length-1])):(M.rangeDateFrom="",M.rangeDateTo="",M._updateLastSelectedDate(!1)),this.trigger(S.eventChangeSelectedDate,{action:S.actionUnselectDate,date:t}),!0}))}replaceDate(t,s){let M=this.selectedDates.find((s=>p(s,t,this.currentView))),x=this.selectedDates.indexOf(M);x<0||p(this.selectedDates[x],s,this.currentView)||(this.selectedDates[x]=s,this.trigger(S.eventChangeSelectedDate,{action:S.actionSelectDate,date:s,updateTime:!0}),this._updateLastSelectedDate(s))}clear(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.lastSelectedDate=!1,this.trigger(S.eventChangeSelectedDate,{action:S.actionUnselectDate,silent:t.silent}),new Promise((t=>{setTimeout(t)}))}show(){let{onShow:t,isMobile:s}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,t&&this._scheduleCallAfterTransition(t),s&&this._showMobileOverlay()}hide(){let{onHide:t,isMobile:s}=this.opts,M=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition((s=>{!this.customHide&&(s&&M||!s&&!M)&&this._finishHide(),t&&t(s)})),s&&U.classList.remove("-active-")}_triggerOnSelect(){let t=[],s=[],{selectedDates:M,locale:S,opts:{onSelect:x,multipleDates:N,range:P}}=this,j=N||P,B="function"==typeof S.dateFormat;M.length&&(t=M.map(g),s=B?N?S.dateFormat(t):t.map((t=>S.dateFormat(t))):t.map((t=>this.formatDate(t,S.dateFormat)))),x({date:j?t:t[0],formattedDate:j?s:s[0],datepicker:this})}_handleAlreadySelectedDates(t,s){let{selectedDates:M,rangeDateFrom:S,rangeDateTo:x}=this,{range:N,toggleSelected:P}=this.opts,j=M.length,B="function"==typeof P?P({datepicker:this,date:s}):P,K=Boolean(N&&1===j&&t),U=K?g(s):s;N&&!B&&(2!==j&&this.selectDate(U),2===j&&p(S,x))||(B?this.unselectDate(U):this._updateLastSelectedDate(K?U:t))}_handleUpDownActions(t,s){if(!((t=b(t||this.focusDate||this.viewDate))instanceof Date))return;let M="up"===s?this.viewIndex+1:this.viewIndex-1;M>2&&(M=2),M<0&&(M=0),this.setViewDate(new Date(t.getFullYear(),t.getMonth(),1)),this.setCurrentView(this.viewIndexes[M])}getCell(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.day;if(!((t=b(t))instanceof Date))return;let{year:M,month:x,date:N}=h(t),P=`[data-year="${M}"]`,j=`[data-month="${x}"]`,B={[S.day]:`${P}${j}[data-date="${N}"]`,[S.month]:`${P}${j}`,[S.year]:`${P}`};return this.views[this.currentView]?this.views[this.currentView].$el.querySelector(B[s]):void 0}_showMobileOverlay(){U.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce(((t,s)=>parseFloat(s)+t),0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return h(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return c(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===S.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===S.days}get $container(){return this.$customContainer||K}static replacer(t,s,M){return t.replace(s,(function(t,s,S,x){return s+M+x}))}}var W;return I(R,"defaults",x),I(R,"version","3.5.3"),I(R,"defaultGlobalContainerId","air-datepicker-global-container"),W=R.prototype,Object.assign(W,B),M.default}()}));var M=s;const S=s.AirDatepicker;export{S as AirDatepicker,M as default};

